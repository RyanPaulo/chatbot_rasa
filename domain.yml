version: "3.1"

intents:
  - saudar
  - despedir
  - agradecer
  - solicitar_ajuda
  - bot_challenge
  - consultar_data_avaliacao
  - consultar_horario_aula
  - consultar_aviso
  - consultar_regras_aps
  - consultar_regras_tcc
  - consultar_estagio
  - consultar_horas_complementares
  - solicitar_info_docente
  - solicitar_atendimento_docente
  - perguntar_conteudo_ia
  - solicitar_material_aula
  - informar_disciplina  # <-- ADICIONADO
  - consultar_duvidas_frequentes

entities:
  - disciplina
  - nome_docente
  - tipo_avaliacao
  - atividade_academica
  - topico_estudo

slots:
  disciplina:
    type: text
    influence_conversation: true # <-- ADICIONADO
    mappings:
    - type: from_entity
      entity: disciplina
    - type: from_text  # <-- ADICIONADO (Impede alucinacao)
      conditions:
      - active_loop: form_buscar_material
  
  nome_docente:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: nome_docente
    - type: from_text
      conditions:
      - active_loop: form_atendimento_docente

responses:
  utter_saudacao:
  - text: "Ola. Sou o assistente academico. Como posso ajudar voce hoje?"
  utter_despedida:
  - text: "Ate mais. Bons estudos."
  utter_agradecer:
  - text: "De nada! Fico feliz em ajudar."
  utter_iamabot:
  - text: "Sou um assistente virtual academico treinado para tirar suas duvidas."
  utter_ajuda:
  - text: "Posso ajudar com datas de provas e aulas, conteudos de materias, informacoes sobre TCC, APS e Estagio e contato de professores."
  utter_default:
  - text: "Desculpe, nao entendi. Pode perguntar de outra forma?"
  utter_ask_nome_docente:
  - text: "Claro. De qual professor voce quer saber o horario?"
  utter_ask_disciplina: # <-- ADICIONADO
  - text: "Claro. De qual disciplina voce quer o material?"

actions:
  - action_buscar_ultimos_avisos
  - action_buscar_cronograma
  - action_buscar_data_avaliacao
  - action_buscar_info_docente
  - action_buscar_info_atividade_academica
  - action_gerar_resposta_com_ia
  - action_buscar_atendimento_docente
  - action_buscar_material
  - action_buscar_duvidas_frequentes

forms:
  form_atendimento_docente:
    required_slots:
    - nome_docente
    ignored_intents:
    - agradecer
    - saudar
    - despedir
  
  form_buscar_material: # <-- ADICIONADO
    required_slots:
    - disciplina
    ignored_intents:
    - agradecer
    - saudar
    - despedir

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true